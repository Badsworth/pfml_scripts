"""Add Title lookup table.

Revision ID: 627e0dbd79c7
Revises: 2515d25d8e7c
Create Date: 2020-12-07 18:13:59.965472

"""
import sqlalchemy as sa
from alembic import op
from sqlalchemy.dialects import postgresql

# revision identifiers, used by Alembic.
revision = "627e0dbd79c7"
down_revision = "e669473b07f8"
branch_labels = None
depends_on = None


def upgrade():
    # ### commands auto generated by Alembic - please adjust! ###
    op.create_table(
        "lk_title",
        sa.Column("title_id", sa.Integer(), autoincrement=True, nullable=False),
        sa.Column("title_description", sa.Text(), nullable=True),
        sa.PrimaryKeyConstraint("title_id"),
    )
    op.create_table(
        "employee_occupation",
        sa.Column("employee_occupation_id", postgresql.UUID(as_uuid=True), nullable=False),
        sa.Column("employee_id", postgresql.UUID(as_uuid=True), nullable=False),
        sa.Column("employer_id", postgresql.UUID(as_uuid=True), nullable=False),
        sa.Column("job_title", sa.Text(), nullable=True),
        sa.Column("date_of_hire", sa.Date(), nullable=True),
        sa.Column("date_job_ended", sa.Date(), nullable=True),
        sa.Column("employment_status", sa.Text(), nullable=True),
        sa.Column("org_unit_name", sa.Text(), nullable=True),
        sa.Column("hours_worked_per_week", sa.Integer(), nullable=True),
        sa.Column("days_worked_per_week", sa.Integer(), nullable=True),
        sa.Column("manager_id", sa.Text(), nullable=True),
        sa.Column("worksite_id", sa.Text(), nullable=True),
        sa.Column("occupation_qualifier", sa.Text(), nullable=True),
        sa.ForeignKeyConstraint(["employee_id"], ["employee.employee_id"]),
        sa.ForeignKeyConstraint(["employer_id"], ["employer.employer_id"]),
        sa.PrimaryKeyConstraint("employee_occupation_id"),
    )
    op.create_index(
        op.f("ix_employee_occupation_employee_id"),
        "employee_occupation",
        ["employee_id"],
        unique=False,
    )
    op.create_index(
        op.f("ix_employee_occupation_employer_id"),
        "employee_occupation",
        ["employer_id"],
        unique=False,
    )
    op.add_column("employee", sa.Column("date_of_death", sa.Date(), nullable=True))
    op.add_column("employee", sa.Column("cell_phone_number", sa.Text(), nullable=True))
    op.add_column("employee", sa.Column("title_id", sa.Integer(), nullable=True))
    op.create_foreign_key(None, "employee", "lk_title", ["title_id"], ["title_id"])
    # ### end Alembic commands ###


def downgrade():
    # ### commands auto generated by Alembic - please adjust! ###
    op.drop_column("employee", "title_id")
    op.drop_column("employee", "cell_phone_number")
    op.drop_column("employee", "date_of_death")
    op.drop_index(op.f("ix_employee_occupation_employer_id"), table_name="employee_occupation")
    op.drop_index(op.f("ix_employee_occupation_employee_id"), table_name="employee_occupation")
    op.drop_table("employee_occupation")
    op.drop_table("lk_title")
    # ### end Alembic commands ###
