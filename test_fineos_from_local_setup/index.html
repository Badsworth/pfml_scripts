
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.2.2, mkdocs-material-7.3.3">
    
    
      
        <title>Test Fineos server from local setup - PFML</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.5143246d.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.3f5d1f46.min.css">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>:root{--md-text-font-family:"Roboto";--md-code-font-family:"Roboto Mono"}</style>
      
    
    
    
    
      


    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="none" data-md-color-accent="none">
  
    
    <script>function __prefix(e){return new URL("..",location).pathname+"."+e}function __get(e,t=localStorage){return JSON.parse(t.getItem(__prefix(e)))}</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#test-fineos-server-from-local-setup" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="PFML" class="md-header__button md-logo" aria-label="PFML" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            PFML
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Test Fineos server from local setup
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        
<a href="https://github.com/EOLWD/PFML/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    EOLWD/pfml
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="PFML" class="md-nav__button md-logo" aria-label="PFML" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    PFML
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/EOLWD/PFML/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    EOLWD/pfml
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        Massachusetts PFML (Portal and API)
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../archiving-code/" class="md-nav__link">
        Process for Archiving Code
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../contributing/" class="md-nav__link">
        Contributing
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../creating-environments/" class="md-nav__link">
        Setting up a new environment
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../deployment/" class="md-nav__link">
        Deployment
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../github-teams-and-codeowners/" class="md-nav__link">
        Github Teams and Code Owners
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Test Fineos server from local setup
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Test Fineos server from local setup
      </a>
      
        
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#1-set-up-env-values" class="md-nav__link">
    1. Set up env values
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-local-authentication" class="md-nav__link">
    2. Local authentication
  </a>
  
    <nav class="md-nav" aria-label="2. Local authentication">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#21-if-you-are-using-local-api-only-use-swagger-ui" class="md-nav__link">
    2.1 If you are using Local API only (use Swagger UI)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#22-if-you-are-using-local-portal-to-local-api" class="md-nav__link">
    2.2 If you are using Local Portal to Local API
  </a>
  
    <nav class="md-nav" aria-label="2.2 If you are using Local Portal to Local API">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#link-local-portal-to-local-api-environment" class="md-nav__link">
    Link Local Portal to Local API environment
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#login-through-a-user-account" class="md-nav__link">
    Login through a user account
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#31-if-you-are-testing-as-a-claimant" class="md-nav__link">
    3.1 If you are testing as a Claimant
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#32-if-you-are-testing-as-a-leave-admin" class="md-nav__link">
    3.2 If you are testing as a Leave Admin
  </a>
  
    <nav class="md-nav" aria-label="3.2 If you are testing as a Leave Admin">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#321-change-current-user-account-to-a-leave-admin-account" class="md-nav__link">
    3.2.1: Change current user account to a leave admin account
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#322-verify-current-user-as-a-leave-admin-for-the-claims-employer" class="md-nav__link">
    3.2.2: Verify current user as a leave admin for the claim's employer
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../tools/" class="md-nav__link">
        Tools
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_9" type="checkbox" id="__nav_9" >
      
      
      
      
        <label class="md-nav__link" for="__nav_9">
          Api
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Api" data-md-level="1">
        <label class="md-nav__title" for="__nav_9">
          <span class="md-nav__icon md-icon"></span>
          Api
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../api/archive-reference/" class="md-nav__link">
        Archived Features Overview (API)
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../api/automated-tests/" class="md-nav__link">
        Automated Tests
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../api/database-migrations/" class="md-nav__link">
        Database Migrations
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../api/db-roles-and-users/" class="md-nav__link">
        Database Users
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../api/development-environment-setup/" class="md-nav__link">
        Development Environment Setup
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../api/environment-variables/" class="md-nav__link">
        Environment Variables
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../api/fields-and-validations/" class="md-nav__link">
        Fields and validations
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../api/monitoring/" class="md-nav__link">
        API Monitoring
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../api/running-the-application-docker/" class="md-nav__link">
        Running the Application (Docker)
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../api/security/" class="md-nav__link">
        API Security
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../api/ses/" class="md-nav__link">
        Ses
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../api/technical-overview/" class="md-nav__link">
        Technical Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../api/working-with-releases/" class="md-nav__link">
        Working With Releases
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../api/writing-tests/" class="md-nav__link">
        Writing Tests
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_10" type="checkbox" id="__nav_10" >
      
      
      
      
        <label class="md-nav__link" for="__nav_10">
          Infra
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Infra" data-md-level="1">
        <label class="md-nav__title" for="__nav_10">
          <span class="md-nav__icon md-icon"></span>
          Infra
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../infra/1-first-time-setup/" class="md-nav__link">
        First-time Setup
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../infra/2-testing-infra-changes/" class="md-nav__link">
        Testing Infrastructure changes
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../infra/3-creating-ecs-tasks/" class="md-nav__link">
        Creating ECS Tasks
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../infra/4-viewing-ecs-task-logs/" class="md-nav__link">
        Viewing ECS Task logs
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../infra/5-making-changes-to-alerts/" class="md-nav__link">
        Making Changes to Alerts
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../infra/6-github-action-workflows/" class="md-nav__link">
        Github Action Workflows
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../infra/7-environment-management/" class="md-nav__link">
        Environment Management
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_10_8" type="checkbox" id="__nav_10_8" >
      
      
      
      
        <label class="md-nav__link" for="__nav_10_8">
          Extras
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Extras" data-md-level="2">
        <label class="md-nav__title" for="__nav_10_8">
          <span class="md-nav__icon md-icon"></span>
          Extras
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../infra/extras/adding-ses-email-address/" class="md-nav__link">
        Adding a new SES email address
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../infra/extras/testing-github-action-permissions/" class="md-nav__link">
        Testing Github Actions permissions
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_11" type="checkbox" id="__nav_11" >
      
      
      
      
        <label class="md-nav__link" for="__nav_11">
          Portal
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Portal" data-md-level="1">
        <label class="md-nav__title" for="__nav_11">
          <span class="md-nav__icon md-icon"></span>
          Portal
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../portal/browser-support/" class="md-nav__link">
        Browser support
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../portal/creating-environments/" class="md-nav__link">
        Setting up a new environment
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../portal/development/" class="md-nav__link">
        Portal Development
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../portal/environment-variables/" class="md-nav__link">
        Environment variables
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../portal/error-handling/" class="md-nav__link">
        Error handling
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../portal/feature-flags/" class="md-nav__link">
        Feature flags
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../portal/internationalization/" class="md-nav__link">
        Internationalization
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../portal/maintenance-pages/" class="md-nav__link">
        Maintenance pages
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../portal/monitoring/" class="md-nav__link">
        Monitoring
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../portal/naming-conventions/" class="md-nav__link">
        Naming conventions
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../portal/software-architecture/" class="md-nav__link">
        Software Architecture
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../portal/storybook/" class="md-nav__link">
        Storybook
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../portal/tests/" class="md-nav__link">
        Tests
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../portal/typescript/" class="md-nav__link">
        TypeScript
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../portal/web-analytics/" class="md-nav__link">
        Web Analytics
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_12" type="checkbox" id="__nav_12" >
      
      
      
      
        <label class="md-nav__link" for="__nav_12">
          Releases
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Releases" data-md-level="1">
        <label class="md-nav__title" for="__nav_12">
          <span class="md-nav__icon md-icon"></span>
          Releases
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../releases/api/" class="md-nav__link">
        Api
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../releases/portal/" class="md-nav__link">
        Portal
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#1-set-up-env-values" class="md-nav__link">
    1. Set up env values
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-local-authentication" class="md-nav__link">
    2. Local authentication
  </a>
  
    <nav class="md-nav" aria-label="2. Local authentication">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#21-if-you-are-using-local-api-only-use-swagger-ui" class="md-nav__link">
    2.1 If you are using Local API only (use Swagger UI)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#22-if-you-are-using-local-portal-to-local-api" class="md-nav__link">
    2.2 If you are using Local Portal to Local API
  </a>
  
    <nav class="md-nav" aria-label="2.2 If you are using Local Portal to Local API">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#link-local-portal-to-local-api-environment" class="md-nav__link">
    Link Local Portal to Local API environment
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#login-through-a-user-account" class="md-nav__link">
    Login through a user account
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#31-if-you-are-testing-as-a-claimant" class="md-nav__link">
    3.1 If you are testing as a Claimant
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#32-if-you-are-testing-as-a-leave-admin" class="md-nav__link">
    3.2 If you are testing as a Leave Admin
  </a>
  
    <nav class="md-nav" aria-label="3.2 If you are testing as a Leave Admin">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#321-change-current-user-account-to-a-leave-admin-account" class="md-nav__link">
    3.2.1: Change current user account to a leave admin account
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#322-verify-current-user-as-a-leave-admin-for-the-claims-employer" class="md-nav__link">
    3.2.2: Verify current user as a leave admin for the claim's employer
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/EOLWD/PFML/edit/master/docs/test_fineos_from_local_setup.md" title="Edit this page" class="md-content__button md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
                  </a>
                
                
                <h1 id="test-fineos-server-from-local-setup">Test Fineos server from local setup</h1>
<p>This documentation shows how you can configure your local set up to interact with the FINEOS server of your choice. </p>
<ul>
<li><a href="#test-fineos-server-from-local-setup">Test Fineos server from local setup</a></li>
<li><a href="#1-set-up-env-values">1. Set up env values</a></li>
<li><a href="#2-local-authentication">2. Local authentication</a><ul>
<li><a href="#21-if-you-are-using-local-api-only-use-swagger-ui">2.1 If you are using Local API only (use Swagger UI)</a></li>
<li><a href="#22-if-you-are-using-local-portal-to-local-api">2.2 If you are using Local Portal to Local API</a></li>
<li><a href="#link-local-portal-to-local-api-environment">Link Local Portal to Local API environment</a></li>
<li><a href="#login-through-a-user-account">Login through a user account</a></li>
</ul>
</li>
<li><a href="#3-data-restrictions-when-interacting-with-fineos">3. Data restrictions when interacting with Fineos</a><ul>
<li><a href="#31-if-you-are-testing-as-a-claimant">3.1 If you are testing as a Claimant</a></li>
<li><a href="#32-if-you-are-testing-as-a-leave-admin">3.2 If you are testing as a Leave Admin</a></li>
<li><a href="#321-change-current-user-account-to-a-leave-admin-account">3.2.1: Change current user account to a leave admin account</a></li>
<li><a href="#322-verify-current-user-as-a-leave-admin-for-the-claims-employer">3.2.2: Verify current user as a leave admin for the claim's employer</a></li>
</ul>
</li>
</ul>
<h2 id="1-set-up-env-values">1. Set up env values</h2>
<p><strong>Decide which FINEOS environment you wish to use. Paste and replace the following values in your <code>docker-compose.yml</code></strong></p>
<details>
  <summary>test - DT2</summary>

<div class="highlight"><pre><span></span><code>  - FINEOS_CLIENT_CUSTOMER_API_URL=https://dt2-api.masspfml.fineos.com/customerapi/
  - FINEOS_CLIENT_WSCOMPOSER_API_URL=https://dt2-api.masspfml.fineos.com/integration-services/wscomposer/
  - FINEOS_CLIENT_GROUP_CLIENT_API_URL=https://dt2-api.masspfml.fineos.com/groupclientapi/
  - FINEOS_CLIENT_INTEGRATION_SERVICES_API_URL=https://dt2-api.masspfml.fineos.com/integration-services/
  - FINEOS_CLIENT_OAUTH2_URL=https://dt2-api.masspfml.fineos.com/oauth2/token
  - FINEOS_CLIENT_OAUTH2_CLIENT_ID=1ral5e957i0l9shul52bhk0037
  // no need to replace the following if you are using Swagger UI
  - COGNITO_USER_POOL_ID=us-east-1_HhQSLYSIe
  - COGNITO_USER_POOL_CLIENT_ID=7sjb96tvg8251lrq5vdk7de9
  - COGNITO_USER_POOL_KEYS_URL=https://cognito-idp.us-east-1.amazonaws.com/us-east-1_HhQSLYSIe/.well-known/jwks.json
</code></pre></div>
</details>
<details>
  <summary>cps-preview - DT3</summary>

  <div class="highlight"><pre><span></span><code>- FINEOS_CLIENT_CUSTOMER_API_URL=https://dt3-api.masspfml.fineos.com/customerapi/
- FINEOS_CLIENT_WSCOMPOSER_API_URL=https://dt3-api.masspfml.fineos.com/integration-services/wscomposer/
- FINEOS_CLIENT_GROUP_CLIENT_API_URL=https://dt3-api.masspfml.fineos.com/groupclientapi/
- FINEOS_CLIENT_INTEGRATION_SERVICES_API_URL=https://dt3-api.masspfml.fineos.com/integration-services/
- FINEOS_CLIENT_OAUTH2_URL=https://dt3-api.masspfml.fineos.com/oauth2/token
- FINEOS_CLIENT_OAUTH2_CLIENT_ID=2gptm2870hlo9ouq70poib8d5g
// no need to replace the following if you are using Swagger UI
- COGNITO_USER_POOL_ID=us-east-1_1OVYp4aZo
- COGNITO_USER_POOL_CLIENT_ID=59oeobfn0759c8166pjh381joc
- COGNITO_USER_POOL_KEYS_URL=https://cognito-idp.us-east-1.amazonaws.com/us-east-1_1OVYp4aZo/.well-known/jwks.json
</code></pre></div>
</details>
<details>
  <summary>stage - IDT</summary>

  <div class="highlight"><pre><span></span><code>- FINEOS_CLIENT_CUSTOMER_API_URL=https://idt-api.masspfml.fineos.com/customerapi/
- FINEOS_CLIENT_WSCOMPOSER_API_URL=https://idt-api.masspfml.fineos.com/integration-services/wscomposer/
- FINEOS_CLIENT_GROUP_CLIENT_API_URL=https://idt-api.masspfml.fineos.com/groupclientapi/
- FINEOS_CLIENT_INTEGRATION_SERVICES_API_URL=https://idt-api.masspfml.fineos.com/integration-services/
- FINEOS_CLIENT_OAUTH2_URL=https://idt-api.masspfml.fineos.com/oauth2/token
- FINEOS_CLIENT_OAUTH2_CLIENT_ID=1fa281uto9tjuqtm21jle7loam
// no need to replace the following if you are using Swagger UI
- COGNITO_USER_POOL_ID=us-east-1_HpL4XslLg
- COGNITO_USER_POOL_CLIENT_ID=10rjcp71r8bnk4459c67bn18t8
- COGNITO_USER_POOL_KEYS_URL=https://cognito-idp.us-east-1.amazonaws.com/us-east-1_HpL4XslLg/.well-known/jwks.json
</code></pre></div>
</details>
<p><br/></p>
<p><strong>Paste <code>FINEOS_CLIENT_OAUTH2_CLIENT_SECRET</code> from 1password7: <code>Fineos Client ID and Secrets</code></strong></p>
<p>These are also available in <a href="https://console.aws.amazon.com/systems-manager/parameters/?region=us-east-1&amp;tab=Table">AWS SSM Parameter Store</a> under <code>/service/pfml-api/${env}/fineos_oauth2_client_secret</code>
<div class="highlight"><pre><span></span><code>- FINEOS_CLIENT_OAUTH2_CLIENT_SECRET=...
</code></pre></div>
<br/></p>
<h2 id="2-local-authentication">2. Local authentication</h2>
<h3 id="21-if-you-are-using-local-api-only-use-swagger-ui">2.1 If you are using Local API only (use Swagger UI)</h3>
<p>Follow <a href="https://github.com/EOLWD/pfml/tree/main/api#setting-up-local-authentication-credentials">the instructions</a> in /api/README.md
<br/></p>
<h3 id="22-if-you-are-using-local-portal-to-local-api">2.2 If you are using Local Portal to Local API</h3>
<h4 id="link-local-portal-to-local-api-environment">Link Local Portal to Local API environment</h4>
<p>in <code>portal/config</code> use the same Cognito ID information you used in <code>api/docker-compose.yml</code></p>
<div class="highlight"><pre><span></span><code>// development.js
apiUrl: &quot;&lt;http://localhost:1550/v1&quot;&gt;

// default.js
cognitoUserPoolId: &quot;{COGNITO_USER_POOL_ID}&quot;,
cognitoUserPoolWebClientId: &quot;{COGNITO_USER_POOL_CLIENT_ID}&quot;,
</code></pre></div>
<h4 id="login-through-a-user-account">Login through a user account</h4>
<p>Option 1: Create a new account through the local portal directly</p>
<details>
<summary> Option 2: Use an existing account from a deployed environment</summary>
If there is a Portal account you'd like to use which has existing information in the deployed FINEOS environment, we'll need to replicate the account in our local database using the email address and Cognito sub_id.

1. Log into the deployed Portal website; e.g. if you are targeting Fineos DT3, then use https://paidleave-cps-preview.eol.mass.gov/. For other environments, see [Environment URLs](https://lwd.atlassian.net/wiki/x/2oBEF).
2. Open console and run following command to get `sub_id`

<div class="highlight"><pre><span></span><code><span class="nx">userDataCookie</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">cookie</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="s1">&#39;; &#39;</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="nx">cookie</span> <span class="p">=&gt;</span> <span class="nx">cookie</span><span class="p">.</span><span class="nx">match</span><span class="p">(</span><span class="sr">/^CognitoIdentityServiceProvider.*userData=/</span><span class="p">))</span>
  <span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="s2">&quot;=&quot;</span><span class="p">)[</span><span class="mf">1</span><span class="p">];</span>
<span class="nb">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nb">decodeURIComponent</span><span class="p">(</span><span class="nx">userDataCookie</span><span class="p">))[</span><span class="s2">&quot;UserAttributes&quot;</span><span class="p">][</span><span class="mf">0</span><span class="p">][</span><span class="s2">&quot;Value&quot;</span><span class="p">]</span>
</code></pre></div>
3. Update user in local API DB
  - run `make create-user` if no user in your database
  - Use a SQL client or database shell(`make login-db`) to update the user row with email address you use in step 1 and sub_id from step 2
<div class="highlight"><pre><span></span><code><span class="err">$</span> <span class="k">UPDATE</span> <span class="k">user</span> <span class="k">SET</span> <span class="n">email_address</span><span class="o">=</span><span class="ss">&quot;&lt;EMAIL_YOU_USE_IN_STEP_1&gt;&quot;</span><span class="p">,</span> <span class="n">sub_id</span><span class="o">=</span><span class="ss">&quot;&lt;SUB_ID_FROM_STEP_2&gt;&quot;</span> <span class="k">WHERE</span> <span class="n">user_id</span><span class="o">=</span><span class="ss">&quot;&lt;CURRENT_USER_ID&gt;&quot;</span><span class="p">;</span>
</code></pre></div>

1. Go to localhost:3000 and login with the same email and password
</details>

<p><br/></p>
<p>## 3. Data restrictions when interacting with Fineos</p>
<p>At this point, we are ready to interact with Fineos from our local setup. Since Fineos is quite strict on the data they intake, we need to do a mark up of the data we use.</p>
<h3 id="31-if-you-are-testing-as-a-claimant">3.1 If you are testing as a Claimant</h3>
<ul>
<li>
<p>Find a name, SSN &amp; FEIN employee-employer combo to use from the <a href="https://docs.google.com/spreadsheets/d/1-t2CKi7X3FdZnatwuGVoYnKW6WQKjKCDAE7Jh4qaMhA/edit#gid=1920693753">spreadsheet</a></p>
</li>
<li>
<p>Run <code>make generate-wagesandcontributions employer_fein=&lt;employer_fein&gt; employee_ssn=&lt;employee_ssn&gt;</code></p>
</li>
<li>
<p><strong>IMPORTANT:</strong>FEIN and SSN donâ€™t require dashes and quotation marks, just numbers;</p>
</li>
<li>This command will create/update the employer record with fineos_employer_id: 1, so if you want to try a new combo, change the existing fineos_employer_id to other number. Otherwise you will get error like <code>(psycopg2.errors.UniqueViolation) duplicate key value violates unique constraint "ix_employer_fineos_employer_id".</code> TODO (EMPLOYER-1677): https://lwd.atlassian.net/browse/EMPLOYER-1677</li>
</ul>
<p>Now you can create an application with this name, SSN and FEIN, and test the flow through local portal or swagger UI. 
After submitting part 1, you can find the absence case in the Fineos Dashboard.</p>
<h3 id="32-if-you-are-testing-as-a-leave-admin">3.2 If you are testing as a Leave Admin</h3>
<p>We don't have a script for this part, so please go to your database shell(<code>make login-db</code>) or use any PostgreSQL clients to modify the data.</p>
<h4 id="321-change-current-user-account-to-a-leave-admin-account">3.2.1: Change current user account to a leave admin account</h4>
<p>Create a record in <code>link_user_role</code> table: 
<div class="highlight"><pre><span></span><code><span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">link_user_role</span> <span class="p">(</span><span class="n">user_id</span><span class="p">,</span> <span class="n">role_id</span><span class="p">)</span> <span class="k">VALUES</span> <span class="p">(</span><span class="o">&lt;</span><span class="n">current_user_id</span><span class="o">&gt;</span><span class="p">,</span> <span class="mi">3</span><span class="p">);</span>
</code></pre></div>
<br /></p>
<h4 id="322-verify-current-user-as-a-leave-admin-for-the-claims-employer">3.2.2: Verify current user as a leave admin for the claim's employer</h4>
<p>When Leave admin reviews a claim, the claim data is from Fineos database and only accessible to a linked and verified employer account. So first, we need to link our current leave admin account to the employer/organization of the claim. </p>
<ol>
<li>Find an absence case from Fineos dashboard and go to the related employer page</li>
<li>If you are using a leave admin account linked to the employer of the claim, you could skip the following steps and retrieve the claim directly.</li>
<li>find the Identification Number, which is <code>employer_fein</code></li>
<li>
<p>find a <code>Portal User ID</code> from the <code>points of contact</code> table</p>
<ul>
<li>choose a row and click edit, and then copy <code>Portal User ID</code> from the edit page</li>
</ul>
</li>
<li>
<p>Create/update an employer record </p>
</li>
</ol>
<div class="highlight"><pre><span></span><code><span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">employer</span> <span class="p">(</span><span class="n">employer_id</span><span class="p">,</span> <span class="n">employer_dba</span><span class="p">,</span> <span class="n">employer_fein</span><span class="p">)</span> <span class="k">VALUES</span> <span class="p">(</span> <span class="o">&lt;</span><span class="n">random</span> <span class="n">uuid</span><span class="o">&gt;</span><span class="p">,</span> <span class="ss">&quot;Fake name&quot;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">FEIN</span> <span class="k">from</span> <span class="n">step</span> <span class="mi">1</span><span class="o">&gt;</span><span class="p">);</span>
</code></pre></div>
<ol>
<li>Create a record in verification table: </li>
</ol>
<div class="highlight"><pre><span></span><code><span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">verification</span> <span class="p">(</span><span class="n">verification_id</span><span class="p">,</span> <span class="n">verification_type_id</span><span class="p">)</span> <span class="k">VALUES</span> <span class="p">(</span> <span class="o">&lt;</span><span class="n">random</span> <span class="n">uuid</span><span class="o">&gt;</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>
</code></pre></div>
<ol>
<li>Create a record in link_user_leave_administrator table:</li>
</ol>
<p><div class="highlight"><pre><span></span><code><span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">link_user_leave_administrator</span> <span class="p">(</span><span class="n">user_id</span><span class="p">,</span> <span class="n">employer_id</span><span class="p">,</span> <span class="n">fineos_web_id</span><span class="p">,</span> <span class="n">user_leave_administrator_id</span><span class="p">,</span> <span class="n">verification_id</span><span class="p">)</span> 
<span class="k">VALUES</span> <span class="p">(</span><span class="o">&lt;</span><span class="n">current_user_id</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">employer_id</span> <span class="k">from</span> <span class="n">step</span> <span class="mi">2</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">Portal</span> <span class="k">User</span> <span class="n">ID</span> <span class="k">from</span> <span class="n">step</span> <span class="mi">1</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">random</span> <span class="n">uuid</span><span class="o">&gt;</span> <span class="p">,</span> <span class="o">&lt;</span><span class="n">verification_id</span> <span class="k">from</span> <span class="n">step</span> <span class="mi">3</span><span class="o">&gt;</span><span class="p">);</span>
</code></pre></div>
  This block can be tweaked based on the data model diagram below to address various test cases. Examples:
- Multiple records can be created to connect your leave admin user to multiple employers.
- The <code>fineos_web_id</code> can be left NULL to indicate a leave admin not yet registered in FINEOS.
- The <code>verification_id</code> can be left NULL to indicate an unverified leave admin.
Note in the last case that the leave admin will be unverifiable if there are no employer quarterly contributions for the employer in the DB, AKA taxes have not been paid yet or have not been filed and reported.</p>
<ol>
<li>Create a record in claim table:</li>
</ol>
<div class="highlight"><pre><span></span><code><span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">claim</span> <span class="p">(</span><span class="n">claim_id</span><span class="p">,</span> <span class="n">employer_id</span><span class="p">,</span> <span class="n">fineos_absence_id</span><span class="p">)</span> <span class="k">VALUES</span> <span class="p">(</span> <span class="o">&lt;</span><span class="n">random</span> <span class="n">uuid</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">employer_id</span> <span class="k">from</span> <span class="n">step</span> <span class="mi">2</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">absence</span> <span class="k">case</span> <span class="n">id</span> <span class="k">from</span> <span class="n">step</span> <span class="mi">1</span><span class="o">&gt;</span><span class="p">);</span>
</code></pre></div>
<p>At this point, you can get this claim from swagger UI or local portal. </p>
<p>More information about how the Leave Admin data model tracks FINEOS registration and verification is below:</p>
<p><a href="https://lwd.atlassian.net/wiki/spaces/EMPLOYER/pages/1669300536/Leave+Administrator+User+States">Leave Administrator User States</a></p>
<p><img width="756" alt="Screen Shot 2021-07-19 at 10 38 13 AM" src="https://lucid.app/publicSegments/view/5d463dee-5466-43dc-8d60-5485d5d39ec6/image.jpeg"></p>
                
              
              
                


              
            </article>
          </div>
        </div>
        
      </main>
      
        
<footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="Footer">
      
        
        <a href="../github-teams-and-codeowners/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Github Teams and Code Owners" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Github Teams and Code Owners
            </div>
          </div>
        </a>
      
      
        
        <a href="../tools/" class="md-footer__link md-footer__link--next" aria-label="Next: Tools" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Tools
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        
          Made with
          <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
            Material for MkDocs
          </a>
        
        
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "..", "features": [], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "search": "../assets/javascripts/workers/search.8397ff9e.min.js", "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.f89c2efe.min.js"></script>
      
    
  </body>
</html>